# 胎动记录器 - 功能规划文档

> 基于医学指南设计 | 最后更新：2026-02-14

---

## 一、胎动基础知识

### 1.1 什么是胎动？
- 胎儿在子宫内的各种动态活动
- 包括：踢、颤动、滚动、打嗝（呃逆）等
- 孕12周后可通过超声观察
- 孕妇可感受到：18-20周（初产妇）、16-18周（经产妇）

### 1.2 胎动规律

| 孕期阶段 | 胎动特点 | 正常范围 |
|---------|---------|---------|
| **孕中期（16-28周）** | 逐渐规律，开始有节奏 | 2小时内≥6次 |
| **孕晚期（28-34周）** | 最活跃时期 | 2小时内≥10次 |
| **孕晚期（34周-分娩）** | 略有减少，但保持规律 | 每小时3-5次 |

### 1.3 胎动高峰期
- **上午**：7-9点
- **晚上**：11点-凌晨1点
- **下午和晚上**为胎动高峰时段

---

## 二、科学计数方法

### 2.1 计数方法

**方法一：「数10法」（美国妇产科学会建议）**
- 孕妇左侧卧位
- 2小时内胎动≥10次 = 正常
- 适合：日常快速监测

**方法二：「定时计数法」（中国常用）**
- 每天早、中、晚各数1小时
- 3次总数 × 4 = 12小时胎动总数
- 正常值：30-40次/12小时

**方法三：「基准线法」（澳大利亚/新西兰指南）**
- 每周3次，每次1小时
- 建立个人胎动基准线
- 低于基准线 = 需要关注

### 2.2 异常标准

| 指标 | 正常 | 警戒 | 危险 |
|-----|------|------|------|
| 12小时胎动 | ≥30次 | 20-30次 | <10次 |
| 2小时胎动 | ≥10次 | 6-10次 | <6次 |
| 1小时胎动 | ≥3次 | <3次 | - |

### 2.3 异常信号

**⚠️ 需要就医的情况：**
- 胎动明显减少（比平时少50%以上）
- 胎动突然剧烈增加后停止
- 12小时胎动<10次

---

## 三、功能规划

### 3.1 核心功能

| 功能 | 描述 | 数据来源 |
|-----|------|---------|
| **一键记录** | 点击按钮记录胎动 | 用户输入 |
| **智能计数** | 根据孕期显示正常范围 | 预置医学数据 |
| **统计报告** | 每日/周/月报告 | 自动计算 |
| **异常提醒** | 低于正常值时提示 | 规则引擎 |
| **孕期设置** | 设置孕周，自动调整标准 | 用户输入 |

### 3.2 页面结构

```
┌─────────────────────────────────────┐
│  1. 首页                              │
│  ├─ 记录按钮（带心跳动画）              │
│  ├─ 今日统计（次数 + 孕期标准）          │
│  ├─ 孕期信息卡片                        │
│  └─ 时间线（今日记录）                  │
├─────────────────────────────────────┤
│  2. 统计                              │
│  ├─ 日报（今日详情）                    │
│  ├─ 周报（7天趋势）                    │
│  ├─ 月报（30天趋势）                   │
│  └─ 孕期建议                           │
├─────────────────────────────────────┤
│  3. 设置                              │
│  ├─ 孕期设置（预产期/当前孕周）          │
│  ├─ 提醒设置                           │
│  └─ 数据管理                           │
└─────────────────────────────────────┘
```

### 3.3 详细功能说明

#### 3.3.1 首页
```
功能项          说明
─────────────────────────────────────
记录按钮        大按钮，点击记录胎动
                带心跳动画效果
                支持震动反馈（可选）

今日统计        显示：
                - 今日胎动次数
                - 孕期正常范围
                - 与标准的对比

孕期信息        显示：
                - 当前孕周
                - 距离预产期
                - 胎动正常范围

时间线          显示今日所有记录
                支持删除单条记录
```

#### 3.3.2 统计页
```
功能项          说明
─────────────────────────────────────
日报            当日详情：
                - 总次数
                - 平均间隔
                - 高峰时段分析
                - 与孕期标准对比

周报            7天趋势图：
                - 每日次数柱状图
                - 周均值
                - 异常天数标记

月报            30天趋势图：
                - 每日趋势折线图
                - 周均值/日均值
                - 异常标记

孕期建议        根据孕周显示：
                - 当前阶段胎动特点
                - 正常范围参考
                - 注意事项提醒
```

#### 3.3.3 设置页
```
功能项          说明
─────────────────────────────────────
孕期设置        设置方式：
                - 输入预产期（自动计算孕 或直接输入当前周）
                -孕周

提醒设置        提醒类型：
                - 每日定时提醒数胎动
                - 异常胎动提醒
                - 产检提醒

数据管理        功能：
                - 导出数据（JSON/CSV）
                - 清除数据
                - 查看存储量
```

---

## 四、数据结构

### 4.1 胎动记录
```json
{
  "记录ID": "uuid",
  "时间戳": "2026-02-14T10:30:00.000Z",
  "孕期": 28,
  "类型": "single"  // single: 单次, session: 记录时段
}
```

### 4.2 用户设置
```json
{
  "预产期": "2026-07-15",
  "当前孕周": 28,
  "提醒开关": true,
  "提醒时间": "10:00",
  "声音": false,
  "震动": true
}
```

### 4.3 统计数据
```json
{
  "日期": "2026-02-14",
  "总次数": 15,
  "12小时等效": 60,
  "状态": "normal",  // normal, warning, abnormal
  "高峰时段": "morning"
}
```

---

## 五、孕期标准对照表

### 5.1 孕周计算
- **孕周 = (预产期 - 当前日期) ÷ 7**
- 孕中期：16-28周
- 孕晚期：28-34周
- 足月：34-40周

### 5.2 各孕周标准

| 孕周 | 胎动特点 | 2小时标准 | 1小时标准 | 建议 |
|-----|---------|----------|----------|------|
| 16-20 | 开始感知 | ≥6次 | ≥2次 | 建立规律 |
| 20-28 | 逐渐规律 | ≥6次 | ≥3次 | 每天监测 |
| 28-34 | **最活跃** | ≥10次 | ≥4次 | 重点监测 |
| 34-37 | 高峰后略减 | ≥8次 | ≥3次 | 保持关注 |
| 37-40 | 空间变小 | ≥6次 | ≥2次 | 密切监测 |

---

## 六、UI设计规范

### 6.1 配色方案

| 用途 | 颜色 | 色值 |
|-----|------|------|
| 主色 | 粉色渐变 | #FFE4EC → #FFB6C1 → #FF69B4 |
| 辅助色 | 紫色 | #E6E6FA → #DDA0DD |
| 健康 | 绿色 | #E8F5E9 → #81C784 |
| 警戒 | 黄色 | #FFF8E1 → #FFD54F |
| 危险 | 红色 | #FFEBEE → #EF5350 |

### 6.2 状态指示

```
状态          图标        颜色        说明
─────────────────────────────────────────
正常          ✅ 绿色    今日≥标准
警戒          ⚠️ 黄色    低于标准20%
危险          🚨 红色    低于标准50%
```

### 6.3 孕期阶段卡片

| 阶段 | 孕周 | 标题 | 描述 |
|-----|------|------|------|
| 孕早期 | 1-12 | 器官形成期 | 胎儿主要器官形成中 |
| 孕中期 | 13-27 | 快速发育期 | 胎动开始，器官成熟 |
| 孕晚期 | 28-40 | 成熟待产期 | 胎动最活跃，准备分娩 |

---

## 七、技术实现

### 7.1 技术栈
- HTML5 + CSS3 + JavaScript
- localStorage 数据存储
- PWA 支持（可添加到主屏幕）

### 7.2 核心算法

**胎动标准判断**
```javascript
function getStandard(week) {
    if (week < 20) return { per2h: 6, per1h: 2 };
    if (week < 28) return { per2h: 6, per1h: 3 };
    if (week < 34) return { per2h: 10, per1h: 4 };  // 最活跃期
    if (week < 37) return { per2h: 8, per1h: 3 };
    return { per2h: 6, per1h: 2 };
}

function assessStatus(count, week, hours = 1) {
    const std = getStandard(week);
    const expected = std[`per${hours}h`];
    const ratio = count / expected;
    
    if (ratio >= 1) return 'normal';
    if (ratio >= 0.5) return 'warning';
    return 'abnormal';
}
```

**12小时等效计算**
```javascript
function calculate12h(todayCount, morningCount, eveningCount) {
    const sum = todayCount + morningCount + eveningCount;
    return sum * 4;
}
```

### 7.3 数据存储结构

```
localStorage
├── kick_records: { '2026-02-14': [时间戳数组] }
├── user_settings: { 预产期, 提醒时间, 震动, 声音 }
└── daily_stats: { '2026-02-14': { 总次, 状态, 高峰时段 } }
```

---

## 八、迭代计划

### 8.1 V1.0（第一版）
- ✅ 一键记录胎动
- ✅ 今日统计
- ✅ 本周柱状图
- ✅ 时间线显示
- ✅ localStorage存储

### 8.2 V1.1（孕期感知版）
- ⏳ 孕期设置（预产期输入）
- ⏳ 智能标准判断
- ⏳ 孕期建议卡片
- ⏳ 异常状态提示

### 8.3 V1.2（报告增强版）
- ⏳ 详细日报
- ⏳ 周报/月报
- ⏳ 趋势分析图
- ⏳ 数据导出

### 8.4 V2.0（智能版）
- ⏳ AI胎动分析
- ⏳ 产检提醒
- ⏳ 医生咨询入口
- ⏳ 夫妻共享数据

---

## 九、参考来源

| 来源 | 链接 |
|-----|------|
| 北京市卫健委 | https://www.beijing.gov.cn/... |
| 上海市普陀区政府 | https://www.shpt.gov.cn/... |
| 湖北省卫健委 | http://wjw.hubei.gov.cn/... |
| 太和县人民医院 | http://www.thxrmyy.com/... |
| 美国妇产科学会 | ACOG Guidelines |
| 澳大利亚&新西兰围产医学会 | SOMANZ Guidelines |

---

*本规划基于医学指南设计，具体情况请遵医嘱*
